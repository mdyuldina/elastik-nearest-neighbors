<!doctype html>

<html>

<head>
	<title>ElastiK Nearest Neighbors Demo</title>
	<link rel="stylesheet" href="https://bootswatch.com/4/journal/bootstrap.css">

	<style>
	.container {
		padding: 1em 0;
	}
	img {
		border: 2px solid black;
		padding: 1px;
	}
	#query_img img {
		object-fit: cover;
		max-width: 90%;
		height: 500px;
	}
	#neighbor_imgs img {
		object-fit: cover;
		width:180px;
		height:180px;
	}

</style>

</head>

<body>
	<div class="container">
		<div class="page-header">
			<div class="row">
				<div class="col-lg-7">
					<h1>Image Similarity Search</h1>
				</div>
				<div class="col-lg-5">
					<p>Built by Alex Klibisz at Insight Data Engineering
						<br/>
						<a href="https://github.com/alexklibisz/elastik-nearest-neighbors#elastik-nearest-neighbors">
						View Project on Github</a> | <a href="/slides">View slides</a>
					</p>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<hr>
					<h3>Searched <span class="badge badge-primary">{{count}} images</span> in
						<span class="badge badge-primary">{{took_ms}} milliseconds.</span></h3>
					<hr>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
						<h3>Query Image</h3>
						<div id="query_img">
							<img src='{{query_img["_source"]["image"]}}'/>
						</div>
					</div>
			<div class="col-lg-6">
						<h3>Most Visually Similar Nearest Neighbors</h3>
						<div class="row" id="neighbor_imgs">
							{% for img in neighbor_imgs %}
							<div class="col-lg-4">
								<a href='{{img["_source"]["image"]}}' target="_blank">
									<img src='{{img["_source"]["image"]}}'/>
								</a>
							</div>
							{% endfor %}
						</div>
					</div>
		</div>
		<div class="row">
			<div class="col-lg-12">
				<hr>
				<center>
					<a class="btn btn-primary btn-lg" href="/{{es_index}}/{{es_type}}/demo">View another demo image</a>
				</center>
			</div>
		</div>
	</div>

</body>

</html>
